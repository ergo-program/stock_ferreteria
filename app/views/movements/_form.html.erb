<section class="content invoice">
  <div class="row">
    <div class="col-md-10">
      <%= nested_form_for @movement do |f|  %>
        <% if @movement.errors.any? %>
          <div class="alert alert-danger alert-dismissable" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">x</button>
            <h4><%= pluralize(@movement.errors.count, "error") %> prohibited this movement from being saved:</h4>

            <ul>
            <% @movement.errors.full_messages.each do |msg| %>
              <li><%= msg %></li>
            <% end %>
            </ul>
          </div>
        <% end %>

      <div class="field col-md-6 form-group">
        <%= f.label :fecha, :class=> 'col-md-3 control-label' %>
        <div class="input-group col-md-6">
          <%= f.text_field :fecha, :class => 'input-group date form-control', :id => 'mydate'%><span class="input-group-addon"><i class="fa fa-calendar"></i></span>
        </div>
      </div>

      <div class="form-group">
        <%= f.label :motivo %>
        <%= f.text_field :motive, :class => "form-control" %>
      </div>
      <div class="form-group">
        <%= f.label :tipo %>
        <%= f.text_field :tipo, :class => "form-control" %>
      </div>
      <div class="form-group">
        <%= f.label :persona %>
        <%= f.text_field :person, :class => "form-control" %>
      </div>

      <br>

      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Cantidad</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <%= f.fields_for :d_movements, :wrapper => false do |detalle| %>
            <tr class="fields">
              <td><%= detalle.collection_select :product_id, Product.all, :id, :nombre, {prompt: "Seleccione un producto"} ,:class => 'btn btn-default'%></td>
              <td><%= detalle.text_field :cantidad %></td>
              <td><%= detalle.link_to_remove "X", :class => 'btn btn-danger'%></td>
            </tr>
          <% end %>
          <tr>
             <td><%= f.link_to_add "Agregar producto", :d_movements, :class => 'insert_in_table btn btn-default' %></td>
          </tr>
        </tbody>
      </table>

      <div class="form-group">
        <%= f.submit 'Guardar', class: 'btn btn-primary' %>
      </div>
    <% end %>
    </div>
  </div>
</section> 